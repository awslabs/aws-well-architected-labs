



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="A collection of AWS Well-Architected workshops">
      
      
        <link rel="canonical" href="https://wellarchitectedlabs.com/Reliability/300_Testing_for_Resiliency_of_EC2_RDS_and_S3/Lab_Guide.html">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>Lab Guide - AWS Well-Architected Labs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#757575">
      
    
    
      <script src="../../assets/javascripts/modernizr.1f0bcf2b.js"></script>



    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="grey" data-md-color-accent="grey">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#level-300-performing-resiliency-testing-for-ec2-rds-and-s3" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://wellarchitectedlabs.com" title="AWS Well-Architected Labs" class="md-header-nav__button md-logo">
          
            <img src="../../images/wa.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              AWS Well-Architected Labs
            </span>
            <span class="md-header-nav__topic">
              
                Lab Guide
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/awslabs/aws-well-architected-labs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    awslabs/aws-well-architected-labs
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../../README.html" class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Operations/README.html" class="md-tabs__link">
          Operational Excellence
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Security/README.html" class="md-tabs__link">
          Security
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../README.html" class="md-tabs__link md-tabs__link--active">
          Reliability
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Performance/README.html" class="md-tabs__link">
          Performance Efficiency
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Cost/README.html" class="md-tabs__link">
          Cost Optimization
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Well-ArchitectedTool/README.html" class="md-tabs__link">
          Well Architected Tool
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://wellarchitectedlabs.com" title="AWS Well-Architected Labs" class="md-nav__button md-logo">
      
        <img src="../../images/wa.png" width="48" height="48">
      
    </a>
    AWS Well-Architected Labs
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/awslabs/aws-well-architected-labs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    awslabs/aws-well-architected-labs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../README.html" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Operational Excellence
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Operational Excellence
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Operations/README.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      100 Inventory Patch Mgt
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        100 Inventory Patch Mgt
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Operations/100_Inventory_and_Patch_Mgmt/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Operations/100_Inventory_and_Patch_Mgmt/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Security
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Security
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/README.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Security 100 Labs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Security 100 Labs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2-1" type="checkbox" id="nav-3-2-1">
    
    <label class="md-nav__link" for="nav-3-2-1">
      Account and Root User
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-2-1">
        Account and Root User
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/100_AWS_Account_and_Root_User/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/100_AWS_Account_and_Root_User/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2-2" type="checkbox" id="nav-3-2-2">
    
    <label class="md-nav__link" for="nav-3-2-2">
      Basic Identity & Access Management User, Group, Role
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-2-2">
        Basic Identity & Access Management User, Group, Role
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/100_Basic_Identity_and_Access_Management_User_Group_Role/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/100_Basic_Identity_and_Access_Management_User_Group_Role/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2-3" type="checkbox" id="nav-3-2-3">
    
    <label class="md-nav__link" for="nav-3-2-3">
      CloudFront with S3 Bucket Origin
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-2-3">
        CloudFront with S3 Bucket Origin
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/100_CloudFront_with_S3_Bucket_Origin/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/100_CloudFront_with_S3_Bucket_Origin/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2-4" type="checkbox" id="nav-3-2-4">
    
    <label class="md-nav__link" for="nav-3-2-4">
      Create a Data Bunker
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-2-4">
        Create a Data Bunker
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/100_Create_a_Data_Bunker/README.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2-5" type="checkbox" id="nav-3-2-5">
    
    <label class="md-nav__link" for="nav-3-2-5">
      Enable Security Hub
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-2-5">
        Enable Security Hub
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/100_Enable_Security_Hub/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/100_Enable_Security_Hub/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3">
    
    <label class="md-nav__link" for="nav-3-3">
      Security 200 Labs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        Security 200 Labs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3-1" type="checkbox" id="nav-3-3-1">
    
    <label class="md-nav__link" for="nav-3-3-1">
      Automated Deployment of Detective Controls
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-3-1">
        Automated Deployment of Detective Controls
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/200_Automated_Deployment_of_Detective_Controls/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/200_Automated_Deployment_of_Detective_Controls/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3-2" type="checkbox" id="nav-3-3-2">
    
    <label class="md-nav__link" for="nav-3-3-2">
      Automated Deployment of EC2 Web Application
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-3-2">
        Automated Deployment of EC2 Web Application
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/200_Automated_Deployment_of_EC2_Web_Application/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/200_Automated_Deployment_of_EC2_Web_Application/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3-3" type="checkbox" id="nav-3-3-3">
    
    <label class="md-nav__link" for="nav-3-3-3">
      Automated Deployment of IAM Groups and Roles
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-3-3">
        Automated Deployment of IAM Groups and Roles
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/200_Automated_Deployment_of_IAM_Groups_and_Roles/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/200_Automated_Deployment_of_IAM_Groups_and_Roles/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3-4" type="checkbox" id="nav-3-3-4">
    
    <label class="md-nav__link" for="nav-3-3-4">
      Automated Deployment of VPC
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-3-4">
        Automated Deployment of VPC
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/200_Automated_Deployment_of_VPC/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/200_Automated_Deployment_of_VPC/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3-5" type="checkbox" id="nav-3-3-5">
    
    <label class="md-nav__link" for="nav-3-3-5">
      Automated Deployment of Web Application Firewall
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-3-5">
        Automated Deployment of Web Application Firewall
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/200_Automated_Deployment_of_Web_Application_Firewall/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/200_Automated_Deployment_of_Web_Application_Firewall/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3-6" type="checkbox" id="nav-3-3-6">
    
    <label class="md-nav__link" for="nav-3-3-6">
      Automated IAM User Cleanup
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-3-6">
        Automated IAM User Cleanup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/200_Automated_IAM_User_Cleanup/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/200_Automated_IAM_User_Cleanup/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3-7" type="checkbox" id="nav-3-3-7">
    
    <label class="md-nav__link" for="nav-3-3-7">
      Basic EC2 with WAF Protection
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-3-7">
        Basic EC2 with WAF Protection
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/200_Basic_EC2_with_WAF_Protection/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/200_Basic_EC2_with_WAF_Protection/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3-8" type="checkbox" id="nav-3-3-8">
    
    <label class="md-nav__link" for="nav-3-3-8">
      CloudFront with WAF Protection
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-3-8">
        CloudFront with WAF Protection
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/200_CloudFront_with_WAF_Protection/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/200_CloudFront_with_WAF_Protection/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4" type="checkbox" id="nav-3-4">
    
    <label class="md-nav__link" for="nav-3-4">
      Security 300 Labs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-4">
        Security 300 Labs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4-1" type="checkbox" id="nav-3-4-1">
    
    <label class="md-nav__link" for="nav-3-4-1">
      IAM Permission Boundaries Delegating Role Creation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-4-1">
        IAM Permission Boundaries Delegating Role Creation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/300_IAM_Permission_Boundaries_Delegating_Role_Creation/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/300_IAM_Permission_Boundaries_Delegating_Role_Creation/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4-2" type="checkbox" id="nav-3-4-2">
    
    <label class="md-nav__link" for="nav-3-4-2">
      IAM Tag Based Access Control for EC2
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-4-2">
        IAM Tag Based Access Control for EC2
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/300_IAM_Tag_Based_Access_Control_for_EC2/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/300_IAM_Tag_Based_Access_Control_for_EC2/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4-3" type="checkbox" id="nav-3-4-3">
    
    <label class="md-nav__link" for="nav-3-4-3">
      Incident Response with AWS Console and CLI
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-4-3">
        Incident Response with AWS Console and CLI
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/300_Incident_Response_with_AWS_Console_and_CLI/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/300_Incident_Response_with_AWS_Console_and_CLI/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4-4" type="checkbox" id="nav-3-4-4">
    
    <label class="md-nav__link" for="nav-3-4-4">
      Lambda Cross Account IAM Role Assumption
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-4-4">
        Lambda Cross Account IAM Role Assumption
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/300_Lambda_Cross_Account_IAM_Role_Assumption/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/300_Lambda_Cross_Account_IAM_Role_Assumption/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4-5" type="checkbox" id="nav-3-4-5">
    
    <label class="md-nav__link" for="nav-3-4-5">
      Lambda Cross Account Using Bucket Policy
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-4-5">
        Lambda Cross Account Using Bucket Policy
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/300_Lambda_Cross_Account_Bucket_Policy/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/300_Lambda_Cross_Account_Bucket_Policy/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4-6" type="checkbox" id="nav-3-4-6">
    
    <label class="md-nav__link" for="nav-3-4-6">
      Incident Response Playbook with Jupyter
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-4-6">
        Incident Response Playbook with Jupyter
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/300_Incident_Response_Playbook_with_Jupyter-AWS_IAM/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/300_Incident_Response_Playbook_with_Jupyter-AWS_IAM/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-5" type="checkbox" id="nav-3-5">
    
    <label class="md-nav__link" for="nav-3-5">
      Security Quests
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-5">
        Security Quests
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/Quest_100_Loft_Introduction_to_Security/README.html" title="Introduction to Security" class="md-nav__link">
      Introduction to Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/Quest_100_Quick_Steps_to_Security_Success/README.html" title="Quick Steps to Security Success" class="md-nav__link">
      Quick Steps to Security Success
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/Quest_200_Incident_Response_Day/README.html" title="Incident Response Day" class="md-nav__link">
      Incident Response Day
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/Quest_300_Security_Best_Practices_Workshop_EC2/README.html" title="Security Best Practices Workshop" class="md-nav__link">
      Security Best Practices Workshop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/Quest_300_Security_Best_Practices_Day/README.html" title="Security Best Practices Day" class="md-nav__link">
      Security Best Practices Day
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/Quest_Managing_Credentials_and_Authentication/README.html" title="Managing Credentials and Authentication" class="md-nav__link">
      Managing Credentials and Authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/Quest_Control_Human_Access/README.html" title="Control Human Access" class="md-nav__link">
      Control Human Access
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/Quest_Control_Programmatic_Access/README.html" title="Control Programmatic Access" class="md-nav__link">
      Control Programmatic Access
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/Quest_Detect_and_Investigate_Events/README.html" title="Detect and Investigate Events" class="md-nav__link">
      Detect and Investigate Events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/Quest_Defend_Against_New_Threats/README.html" title="Defend Against New Threats" class="md-nav__link">
      Defend Against New Threats
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/Quest_Protect_Networks/README.html" title="Protect Networks" class="md-nav__link">
      Protect Networks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/Quest_Protect_Compute/README.html" title="Protect Compute" class="md-nav__link">
      Protect Compute
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/Quest_Classify_Data/README.html" title="Classify Data" class="md-nav__link">
      Classify Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/Quest_Protect_Data_at_Rest/README.html" title="Protect Data at Rest" class="md-nav__link">
      Protect Data at Rest
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/Quest_Protect_Data_in_Transit/README.html" title="Protect Data in Transit" class="md-nav__link">
      Protect Data in Transit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Security/Quest_Incident_Response/README.html" title="Incident Response" class="md-nav__link">
      Incident Response
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Reliability
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Reliability
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../README.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      200 Testing Backup and Restore of Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        200 Testing Backup and Restore of Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../200_Testing_Backup_and_Restore_of_Data/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../200_Testing_Backup_and_Restore_of_Data/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      300 Health Checks and Dependencies
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        300 Health Checks and Dependencies
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../300_Health_Checks_and_Dependencies/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../300_Health_Checks_and_Dependencies/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4" checked>
    
    <label class="md-nav__link" for="nav-4-4">
      Testing Resiliency
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        Testing Resiliency
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4-1" type="checkbox" id="nav-4-4-1">
    
    <label class="md-nav__link" for="nav-4-4-1">
      200 EC2 Resiliency
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-4-1">
        200 EC2 Resiliency
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../200_Testing_for_Resiliency_of_EC2/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../200_Testing_for_Resiliency_of_EC2/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4-2" type="checkbox" id="nav-4-4-2" checked>
    
    <label class="md-nav__link" for="nav-4-4-2">
      300 EC2, RDS S3 Resiliency
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-4-2">
        300 EC2, RDS S3 Resiliency
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Lab Guide
      </label>
    
    <a href="Lab_Guide.html" title="Lab Guide" class="md-nav__link md-nav__link--active">
      Lab Guide
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#authors" class="md-nav__link">
    Authors
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of Contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-deploy-the-infrastructure" class="md-nav__link">
    1. Deploy the Infrastructure 
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-log-into-the-aws-console" class="md-nav__link">
    1.1 Log into the AWS console 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-checking-for-existing-service-linked-roles" class="md-nav__link">
    1.2 Checking for existing service-linked roles
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-create-the-deployment-machine" class="md-nav__link">
    1.3 Create the "deployment machine" 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-deploy-infrastructure-and-run-the-service" class="md-nav__link">
    1.4 Deploy infrastructure and run the service 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15-view-website-for-test-web-service" class="md-nav__link">
    1.5 View website for test web service 
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-configure-execution-environment" class="md-nav__link">
    2. Configure Execution Environment 
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-setup-aws-credentials-and-configuration" class="md-nav__link">
    2.1 Setup AWS credentials and configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-set-up-the-bash-environment" class="md-nav__link">
    2.2 Set up the bash environment 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-set-up-the-programming-language-environment-for-python-java-c-or-powershell" class="md-nav__link">
    2.3 Set up the programming language environment (for Python, Java, C#, or PowerShell) 
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-test-resiliency-using-failure-injection" class="md-nav__link">
    3. Test Resiliency Using Failure Injection 
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    Preparation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#31-ec2-failure-injection" class="md-nav__link">
    3.1 EC2 failure injection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-system-response-to-ec2-instance-failure" class="md-nav__link">
    3.2 System response to EC2 instance failure
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-system-availability" class="md-nav__link">
    3.2.1 System availability
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322-load-balancing" class="md-nav__link">
    3.2.2 Load balancing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323-auto-scaling" class="md-nav__link">
    3.2.3 Auto scaling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#324-ec2-failure-injection-conclusion" class="md-nav__link">
    3.2.4 EC2 failure injection - conclusion
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-rds-failure-injection" class="md-nav__link">
    3.3 RDS failure injection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-system-response-to-rds-instance-failure" class="md-nav__link">
    3.4 System response to RDS instance failure
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#341-system-availability" class="md-nav__link">
    3.4.1 System availability
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#342-failover-to-standby" class="md-nav__link">
    3.4.2 Failover to standby
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#342-ec2-server-replacement" class="md-nav__link">
    3.4.2 EC2 server replacement
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#343-rds-failure-injection-conclusion" class="md-nav__link">
    3.4.3 RDS failure injection - conclusion
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36-az-failure-injection" class="md-nav__link">
    3.6 AZ failure injection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#37-system-response-to-az-failure" class="md-nav__link">
    3.7 System response to AZ failure
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#371-system-availability" class="md-nav__link">
    3.7.1 System availability
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#372-scenario-1-load-balancer-and-web-server-tiers" class="md-nav__link">
    3.7.2 Scenario 1 - Load balancer and web server tiers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#373-scenario-2-load-balancer-web-server-and-data-tiers" class="md-nav__link">
    3.7.3 Scenario 2 - Load balancer, web server, and data tiers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#374-az-failure-injection-conclusion" class="md-nav__link">
    3.7.4 AZ failure injection - conclusion
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#374-az-failure-recovery" class="md-nav__link">
    3.7.4 AZ failure recovery
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#38-s3-failure-injection" class="md-nav__link">
    3.8 S3 failure injection
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#381-bucket-name" class="md-nav__link">
    3.8.1 Bucket name
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aws-console" class="md-nav__link">
    AWS Console
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#383-system-response-to-s3-failure" class="md-nav__link">
    3.8.3 System response to S3 failure 
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#39-more-testing-you-can-do" class="md-nav__link">
    3.9 More testing you can do
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-tear-down-this-lab" class="md-nav__link">
    4. Tear down this lab 
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#remove-manually-provisioned-resources" class="md-nav__link">
    Remove manually provisioned resources
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-aws-cloudformation-provisioned-resources" class="md-nav__link">
    Remove AWS CloudFormation provisioned resources
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-delete-an-aws-cloudformation-stack" class="md-nav__link">
    How to delete an AWS CloudFormation stack
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-workshop-cloudformation-stacks" class="md-nav__link">
    Delete workshop CloudFormation stacks
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-region" class="md-nav__link">
    Single region
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-region" class="md-nav__link">
    Multi region
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-remaining-resources" class="md-nav__link">
    Delete remaining resources
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delete-lambda-execution-role-used-to-create-custom-resource" class="md-nav__link">
    Delete Lambda execution role used to create custom resource
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-systems-manager-parameter" class="md-nav__link">
    Delete Systems Manager parameter
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references-useful-resources" class="md-nav__link">
    References &amp; useful resources
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    License
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#documentation-license" class="md-nav__link">
    Documentation License
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-license" class="md-nav__link">
    Code License
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="TroubleShooting_Guide.html" title="Trouble Shooting Guide" class="md-nav__link">
      Trouble Shooting Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Performance Efficiency
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Performance Efficiency
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Performance/README.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Performance/100_Monitoring_with_CloudWatch_Dashboards/README.html" title="Monitoring with CloudWatch Dashboards" class="md-nav__link">
      Monitoring with CloudWatch Dashboards
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Cost Optimization
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Cost Optimization
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/README.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Fundamentals.html" title="Fundamentals" class="md-nav__link">
      Fundamentals
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/ExpenditureAwareness.html" title="Expenditure Awareness" class="md-nav__link">
      Expenditure Awareness
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/CostEffectiveResources.html" title="Cost Effective Resources" class="md-nav__link">
      Cost Effective Resources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-5" type="checkbox" id="nav-6-5">
    
    <label class="md-nav__link" for="nav-6-5">
      100 Level Labs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-5">
        100 Level Labs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-5-1" type="checkbox" id="nav-6-5-1">
    
    <label class="md-nav__link" for="nav-6-5-1">
      Account Setup
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-5-1">
        Account Setup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_Fundamentals/100_1_AWS_Account_Setup/README.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_Fundamentals/100_1_AWS_Account_Setup/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-5-2" type="checkbox" id="nav-6-5-2">
    
    <label class="md-nav__link" for="nav-6-5-2">
      Cost and Usage Governance
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-5-2">
        Cost and Usage Governance
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_Fundamentals/100_2_Cost_and_Usage_Governance/README.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_Fundamentals/100_2_Cost_and_Usage_Governance/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-5-3" type="checkbox" id="nav-6-5-3">
    
    <label class="md-nav__link" for="nav-6-5-3">
      Pricing Models
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-5-3">
        Pricing Models
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_Fundamentals/100_3_Pricing_Models/README.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_Fundamentals/100_3_Pricing_Models/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-5-4" type="checkbox" id="nav-6-5-4">
    
    <label class="md-nav__link" for="nav-6-5-4">
      Cost and Usage Analysis
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-5-4">
        Cost and Usage Analysis
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_Fundamentals/100_4_Cost_and_Usage_Analysis/README.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_Fundamentals/100_4_Cost_and_Usage_Analysis/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-5-5" type="checkbox" id="nav-6-5-5">
    
    <label class="md-nav__link" for="nav-6-5-5">
      Cost and Usage Visualization
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-5-5">
        Cost and Usage Visualization
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_Fundamentals/100_5_Cost_Visualization/README.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_Fundamentals/100_5_Cost_Visualization/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-6" type="checkbox" id="nav-6-6">
    
    <label class="md-nav__link" for="nav-6-6">
      200 Level Labs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-6">
        200 Level Labs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-6-1" type="checkbox" id="nav-6-6-1">
    
    <label class="md-nav__link" for="nav-6-6-1">
      Cost and Usage Governance
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-6-1">
        Cost and Usage Governance
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_Fundamentals/200_2_Cost_and_Usage_Governance/README.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_Fundamentals/200_2_Cost_and_Usage_Governance/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-6-2" type="checkbox" id="nav-6-6-2">
    
    <label class="md-nav__link" for="nav-6-6-2">
      RI Analysis
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-6-2">
        RI Analysis
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_Fundamentals/200_3_Pricing_Models/README.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_Fundamentals/200_3_Pricing_Models/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-6-3" type="checkbox" id="nav-6-6-3">
    
    <label class="md-nav__link" for="nav-6-6-3">
      Savings Plan Analysis
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-6-3">
        Savings Plan Analysis
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_Effective_Resources/200_Pricing_Model_Analysis/README.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_Effective_Resources/200_Pricing_Model_Analysis/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-6-4" type="checkbox" id="nav-6-6-4">
    
    <label class="md-nav__link" for="nav-6-6-4">
      Cost and Usage Analysis
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-6-4">
        Cost and Usage Analysis
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_Fundamentals/200_4_Cost_and_Usage_Analysis/README.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_Fundamentals/200_4_Cost_and_Usage_Analysis/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-6-5" type="checkbox" id="nav-6-6-5">
    
    <label class="md-nav__link" for="nav-6-6-5">
      Cost and Usage Visualization
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-6-5">
        Cost and Usage Visualization
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_Fundamentals/200_5_Cost_Visualization/README.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_Fundamentals/200_5_Cost_Visualization/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-7" type="checkbox" id="nav-6-7">
    
    <label class="md-nav__link" for="nav-6-7">
      300 Level Labs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-7">
        300 Level Labs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-7-1" type="checkbox" id="nav-6-7-1">
    
    <label class="md-nav__link" for="nav-6-7-1">
      Automated CUR Updates and Ingestion
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-7-1">
        Automated CUR Updates and Ingestion
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_and_Usage_Analysis/300_Automated_CUR_Updates_and_Ingestion/README.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_and_Usage_Analysis/300_Automated_CUR_Updates_and_Ingestion/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-7-2" type="checkbox" id="nav-6-7-2">
    
    <label class="md-nav__link" for="nav-6-7-2">
      Multi Account CUR Access
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-7-2">
        Multi Account CUR Access
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_and_Usage_Analysis/300_Multi_Account_CUR_Access/README.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_and_Usage_Analysis/300_Multi_Account_CUR_Access/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-7-3" type="checkbox" id="nav-6-7-3">
    
    <label class="md-nav__link" for="nav-6-7-3">
      Splitting Sharing CUR
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-7-3">
        Splitting Sharing CUR
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_and_Usage_Analysis/300_Splitting_Sharing_CUR_Access/README.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Cost_and_Usage_Analysis/300_Splitting_Sharing_CUR_Access/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-7-4" type="checkbox" id="nav-6-7-4">
    
    <label class="md-nav__link" for="nav-6-7-4">
      Auto Financial CUR Reports
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-7-4">
        Auto Financial CUR Reports
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Expenditure_Awareness/300_Automated_CUR_Query_and_Email_Delivery/README.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cost/Expenditure_Awareness/300_Automated_CUR_Query_and_Email_Delivery/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Well Architected Tool
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Well Architected Tool
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Well-ArchitectedTool/README.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2" type="checkbox" id="nav-7-2">
    
    <label class="md-nav__link" for="nav-7-2">
      Walkthrough
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-2">
        Walkthrough
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Well-ArchitectedTool/100_Walkthrough_of_the_Well-Architected_Tool/README.html" title="Lab Overview" class="md-nav__link">
      Lab Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Well-ArchitectedTool/100_Walkthrough_of_the_Well-Architected_Tool/Lab_Guide.html" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#authors" class="md-nav__link">
    Authors
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of Contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-deploy-the-infrastructure" class="md-nav__link">
    1. Deploy the Infrastructure 
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-log-into-the-aws-console" class="md-nav__link">
    1.1 Log into the AWS console 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-checking-for-existing-service-linked-roles" class="md-nav__link">
    1.2 Checking for existing service-linked roles
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-create-the-deployment-machine" class="md-nav__link">
    1.3 Create the "deployment machine" 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-deploy-infrastructure-and-run-the-service" class="md-nav__link">
    1.4 Deploy infrastructure and run the service 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15-view-website-for-test-web-service" class="md-nav__link">
    1.5 View website for test web service 
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-configure-execution-environment" class="md-nav__link">
    2. Configure Execution Environment 
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-setup-aws-credentials-and-configuration" class="md-nav__link">
    2.1 Setup AWS credentials and configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-set-up-the-bash-environment" class="md-nav__link">
    2.2 Set up the bash environment 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-set-up-the-programming-language-environment-for-python-java-c-or-powershell" class="md-nav__link">
    2.3 Set up the programming language environment (for Python, Java, C#, or PowerShell) 
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-test-resiliency-using-failure-injection" class="md-nav__link">
    3. Test Resiliency Using Failure Injection 
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    Preparation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#31-ec2-failure-injection" class="md-nav__link">
    3.1 EC2 failure injection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-system-response-to-ec2-instance-failure" class="md-nav__link">
    3.2 System response to EC2 instance failure
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-system-availability" class="md-nav__link">
    3.2.1 System availability
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322-load-balancing" class="md-nav__link">
    3.2.2 Load balancing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323-auto-scaling" class="md-nav__link">
    3.2.3 Auto scaling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#324-ec2-failure-injection-conclusion" class="md-nav__link">
    3.2.4 EC2 failure injection - conclusion
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-rds-failure-injection" class="md-nav__link">
    3.3 RDS failure injection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-system-response-to-rds-instance-failure" class="md-nav__link">
    3.4 System response to RDS instance failure
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#341-system-availability" class="md-nav__link">
    3.4.1 System availability
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#342-failover-to-standby" class="md-nav__link">
    3.4.2 Failover to standby
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#342-ec2-server-replacement" class="md-nav__link">
    3.4.2 EC2 server replacement
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#343-rds-failure-injection-conclusion" class="md-nav__link">
    3.4.3 RDS failure injection - conclusion
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36-az-failure-injection" class="md-nav__link">
    3.6 AZ failure injection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#37-system-response-to-az-failure" class="md-nav__link">
    3.7 System response to AZ failure
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#371-system-availability" class="md-nav__link">
    3.7.1 System availability
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#372-scenario-1-load-balancer-and-web-server-tiers" class="md-nav__link">
    3.7.2 Scenario 1 - Load balancer and web server tiers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#373-scenario-2-load-balancer-web-server-and-data-tiers" class="md-nav__link">
    3.7.3 Scenario 2 - Load balancer, web server, and data tiers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#374-az-failure-injection-conclusion" class="md-nav__link">
    3.7.4 AZ failure injection - conclusion
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#374-az-failure-recovery" class="md-nav__link">
    3.7.4 AZ failure recovery
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#38-s3-failure-injection" class="md-nav__link">
    3.8 S3 failure injection
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#381-bucket-name" class="md-nav__link">
    3.8.1 Bucket name
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aws-console" class="md-nav__link">
    AWS Console
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#383-system-response-to-s3-failure" class="md-nav__link">
    3.8.3 System response to S3 failure 
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#39-more-testing-you-can-do" class="md-nav__link">
    3.9 More testing you can do
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-tear-down-this-lab" class="md-nav__link">
    4. Tear down this lab 
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#remove-manually-provisioned-resources" class="md-nav__link">
    Remove manually provisioned resources
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-aws-cloudformation-provisioned-resources" class="md-nav__link">
    Remove AWS CloudFormation provisioned resources
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-delete-an-aws-cloudformation-stack" class="md-nav__link">
    How to delete an AWS CloudFormation stack
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-workshop-cloudformation-stacks" class="md-nav__link">
    Delete workshop CloudFormation stacks
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-region" class="md-nav__link">
    Single region
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-region" class="md-nav__link">
    Multi region
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-remaining-resources" class="md-nav__link">
    Delete remaining resources
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delete-lambda-execution-role-used-to-create-custom-resource" class="md-nav__link">
    Delete Lambda execution role used to create custom resource
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-systems-manager-parameter" class="md-nav__link">
    Delete Systems Manager parameter
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references-useful-resources" class="md-nav__link">
    References &amp; useful resources
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    License
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#documentation-license" class="md-nav__link">
    Documentation License
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-license" class="md-nav__link">
    Code License
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/awslabs/aws-well-architected-labs/edit/master/docs/Reliability/300_Testing_for_Resiliency_of_EC2_RDS_and_S3/Lab_Guide.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="level-300-performing-resiliency-testing-for-ec2-rds-and-s3">Level 300: Performing Resiliency Testing for EC2, RDS, and S3</h1>
<h2 id="authors">Authors</h2>
<ul>
<li>Rodney Lester, Reliability Lead, Well-Architected, AWS</li>
<li>Adrian Hornsby, Tech Evangelist, AWS</li>
<li>Seth Eliot, Resiliency Lead, Well-Architected, AWS</li>
</ul>
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#deploy_infra">Deploy the Infrastructure</a></li>
<li><a href="#configure_env">Configure Execution Environment</a></li>
<li><a href="#failure_injection">Test Resiliency Using Failure Injection</a></li>
<li><a href="#tear_down">Tear down this lab</a></li>
</ol>
<h2 id="1-deploy-the-infrastructure">1. Deploy the Infrastructure <a name="deploy_infra"></a></h2>
<p>You will create a multi-tier architecture using AWS and run a simple service on it. The service is a web server running on Amazon EC2 fronted by an Elastic Load Balancer reverse-proxy, with a data store on Amazon Relational Database Service (RDS).</p>
<p><img alt="ThreeTierArchitecture" src="Images/ThreeTierArchitecture.png" /></p>
<h3 id="11-log-into-the-aws-console">1.1 Log into the AWS console <a name="awslogin"></a></h3>
<p><strong>If you are attending an in-person workshop and were provided with an AWS account by the instructor</strong>:</p>
<ul>
<li>Follow the instructions <a href="Documentation/Workshop_AWS_Account.html">here for accessing your AWS account</a></li>
<li><strong>Note</strong>: As part of these instructions you are directed to copy and save <strong>AWS credentials</strong> for your account. Please do so as you will need them later</li>
</ul>
<p><strong>If you are using your own AWS account</strong>:</p>
<ul>
<li>Sign in to the AWS Management Console as an IAM user who has PowerUserAccess or AdministratorAccess permissions, to ensure successful execution of this lab.</li>
<li>You will need the AWS credentials, <code>AWS_ACCESS_KEY_ID</code> and <code>AWS_SECRET_ACCESS_KEY</code>, of this IAM user for later use in this lab.<ul>
<li>If you do not have this IAM user's credentials or you wish to create a new IAM user with needed permissions, follow the <a href="Documentation/Self_AWS_Account.html">instructions here to create them</a></li>
</ul>
</li>
</ul>
<h3 id="12-checking-for-existing-service-linked-roles">1.2 Checking for existing service-linked roles</h3>
<p><strong>If you are attending an in-person workshop and were provided with an AWS account by the instructor</strong>: Skip this step and go directly to step <a href="#create_statemachine">Create the "deployment machine"</a>.</p>
<p><strong>If you are using your own AWS account</strong>: <a href="Documentation/Service_Linked_Roles.html#exist_service_linked_roles">Follow these steps</a>, and then return here and resume with the following instructions.</p>
<h3 id="13-create-the-deployment-machine">1.3 Create the "deployment machine" <a name="create_statemachine"></a></h3>
<p>Here you will build a state machine using AWS Step Functions and AWS Lambda that orchestrates the deployment of the multi-tier infrastructure. This is not the service infrastructure itself, but meta-infrastructure we use to build the actual infrastructure.</p>
<p><em><strong>Learn more</strong>: After the lab see <a href="https://aws.amazon.com/blogs/devops/using-aws-step-functions-state-machines-to-handle-workflow-driven-aws-codepipeline-actions/">this blog post</a> on how AWS Step Functions and AWS CodePipelines can work together to deploy your infrastructure</em></p>
<ol>
<li>
<p>Decide which deployment option you will use for this lab. It can be run as <strong>single region</strong> <em>or</em> <strong>multi region</strong> (two region) deployment.</p>
<ul>
<li><strong>single region</strong> is faster to get up and running</li>
<li><strong>multi region</strong> enables you to test some additional aspects of cross-regional resilience.</li>
<li>Decide on one of these options, then in later steps choose the appropriate instructions for the option you have chosen. If you are attending an in-person workshop, your instructor will specify which to use.</li>
</ul>
</li>
<li>
<p>Get the CloudFormation template: Download the appropriate file (You can right-click then choose download; or you can right click and copy the link to use with <code>wget</code>)</p>
<ul>
<li><strong>single region</strong>: <a href="https://raw.githubusercontent.com/awslabs/aws-well-architected-labs/master/Reliability/300_Testing_for_Resiliency_of_EC2_RDS_and_S3/Code/CloudFormation/lambda_functions_for_deploy.json">download CloudFormation template here</a></li>
<li><strong>multi region</strong>: <a href="https://raw.githubusercontent.com/awslabs/aws-well-architected-labs/master/Reliability/300_Testing_for_Resiliency_of_EC2_RDS_and_S3/Code/CloudFormation/lambda_functions_for_deploy_two_regions.json">download CloudFormation template here</a></li>
</ul>
</li>
<li>
<p>Ensure you have selected the <strong>Ohio</strong> region.  This region is also known as <strong>us-east-2</strong>, which you will see referenced throughout this lab.
<img alt="SelectOhio" src="Images/SelectOhio.png" /></p>
</li>
<li>
<p>Go to the AWS CloudFormation console at <a href="https://console.aws.amazon.com/cloudformation">https://console.aws.amazon.com/cloudformation</a> and click Create Stack:
<img alt="Images/CreateStackButton" src="Images/CreateStackButton.png" /></p>
</li>
<li>
<p>Leave "Prepare template" setting as-is</p>
<ul>
<li>1 - For "Template source" select "Upload a template file"</li>
<li>2 - Specify the CloudFormation template you downloaded
   <img alt="CFNSFromDownloadedFile" src="Images/CFNSFromDownloadedFile.png" /></li>
</ul>
</li>
<li>
<p>Click the Next button. For "Stack name" enter:</p>
<pre><code>DeployResiliencyWorkshop
</code></pre>
<p><img alt="CFNStackName-ohio" src="Images/CFNStackName-ohio.png" /></p>
</li>
<li>
<p>On the same screen, for "Parameters" enter the appropriate values:</p>
<ul>
<li><strong>If you are attending an in-person workshop and were provided with an AWS account by the instructor</strong>: Leave all the parameters at their default values</li>
<li><strong>If you are using your own AWS account</strong>: Set the <a href="Documentation/Service_Linked_Roles.html#cfn_service_linked_roles">first three parameters using these instructions</a> and leave all other parameters at their default values.</li>
<li>You optionally may review <a href="Documentation/CFN_Parameters.html">the default values of this CloudFormation template here</a></li>
</ul>
</li>
<li>
<p>Click the Next button.</p>
<ul>
<li>On the "Configure stack options" page, click Next again</li>
<li>On the "Review DeployResiliencyWorkshop" page, scroll to the bottom and tick the checkbox I acknowledge that AWS CloudFormation might create IAM resources.</li>
<li>Click the Create stack button.
 <img alt="CFNIamCapabilities" src="Images/CFNIamCapabilities.png" /></li>
</ul>
</li>
<li>
<p>This will take you to the CloudFormation stack status page, showing the stack creation in progress.<br />
<img alt="StackCreationStarted" src="Images/StackCreationStarted.png" /><br />
  This will take approximately a minute to deploy.  When it shows status <code>CREATE_COMPLETE</code>, then you are finished with this step.</p>
</li>
</ol>
<h3 id="14-deploy-infrastructure-and-run-the-service">1.4 Deploy infrastructure and run the service <a name="deployinfra"></a></h3>
<ol>
<li>
<p>Go to the AWS Step Function console at <a href="https://console.aws.amazon.com/states">https://console.aws.amazon.com/states</a></p>
</li>
<li>
<p>On the Step Functions dashboard, you will see State Machines and you will have a new one named DeploymentMachine-<em>random characters</em>. Click on that state machine. This will bring up an execution console. Click on the Start execution button.
<img alt="ExecutionStart-ohio" src="Images/ExecutionStart-ohio.png" /></p>
</li>
<li>
<p>On the "New execution" dialog, for "Enter an execution name" delete the auto-generated name and replace it with:  <code>BuildResiliency</code></p>
</li>
<li>
<p>Then for "Input" enter JSON that will be used to supply parameter values to the Lambdas in the workflow.</p>
<ul>
<li>
<p><strong>single region</strong> uses the following values:</p>
<pre><code>{
  "log_level": "DEBUG",
  "region_name": "us-east-2",
  "cfn_region": "us-east-2",
  "cfn_bucket": "aws-well-architected-labs-ohio",
  "folder": "Reliability/",
  "workshop": "300-ResiliencyofEC2RDSandS3",
  "boot_bucket": "aws-well-architected-labs-ohio",
  "boot_prefix": "Reliability/",
  "websiteimage" : "https://s3.us-east-2.amazonaws.com/arc327-well-architected-for-reliability/Cirque_of_the_Towers.jpg"
}
</code></pre>
</li>
<li>
<p><strong>multi region</strong> uses the <a href="Documentation/Multi_Region_Event_Data.html">values here</a></p>
</li>
<li><strong>Note</strong>: for <code>websiteimage</code> you can supply an alternate link to a public-read-only image in an S3 bucket you control. This will allow you to run S3 resiliency tests as part of the lab</li>
<li>
<p>Then click the Start Execution button.</p>
<p><img alt="ExecutionInput-ohio" src="Images/ExecutionInput-ohio.png" />  </p>
</li>
</ul>
</li>
<li>
<p>The "deployment machine" is now deploying the infrastructure and service you will use for resiliency testing.</p>
<table>
<thead>
<tr>
<th>Time until you can start...</th>
<th>Single region</th>
<th>Multi region</th>
</tr>
</thead>
<tbody>
<tr>
<td>EC2 failure injection test</td>
<td>15-20 min</td>
<td>15-20 min</td>
</tr>
<tr>
<td>RDS and AZ failure injection tests</td>
<td>20-25 min</td>
<td>40-45 min</td>
</tr>
<tr>
<td>Multi-region failure injection tests</td>
<td>NA</td>
<td>50-55 min</td>
</tr>
<tr>
<td>Total deployment time</td>
<td>20-25 min</td>
<td>50-55 min</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>You can watch the state machine as it executes by clicking the icon to expand the visual workflow to the full screen.<br />
<img alt="StateMachineExecuting" src="Images/StateMachineExecuting.png" /></p>
</li>
<li>
<p>You can also watch the <a href="https://console.aws.amazon.com/cloudformation">CloudFormation stacks</a> as they are created and transition from <code>CREATE_IN_PROGRESS</code> to <code>CREATE_COMPLETE</code>.
<img alt="DeploymentStacksInProgress" src="Images/DeploymentStacksInProgress.png" /></p>
</li>
<li>
<p>Note: If you are in a workshop, the instructor will share background and technical information while your service is deployed.</p>
</li>
<li>
<p>You can start the first test (EC2 failure injection testing)  when the web tier has been deployed in the Ohio region. Look for the <code>WaitForWebApp</code> step (for <strong>single region</strong>) or <code>WaitForWebApp1</code> step (for <strong>multi region</strong>) to have completed successfully.  This will look something like this on the visual workflow.</p>
<p><img alt="StepFunctionWebAppDeployed" src="Images/StepFunctionWebAppDeployedSingleRegion.png" /></p>
<ul>
<li>Above screen shot is for <strong>single region</strong>. for <strong>multi region</strong> see <a href="Documentation/Multi_Region_State_Machine.html">this diagram instead</a></li>
</ul>
</li>
</ol>
<h3 id="15-view-website-for-test-web-service">1.5 View website for test web service <a name="website"></a></h3>
<ol>
<li>
<p>Go to the AWS CloudFormation console at <a href="https://console.aws.amazon.com/cloudformation">https://console.aws.amazon.com/cloudformation</a>.</p>
<ul>
<li>click on the <code>WebServersforResiliencyTesting</code> stack</li>
<li>click on the "Outputs" tab</li>
<li>For the Key <code>WebSiteURL</code> copy the value.  This is the URL of your test web service.
  <img alt="CFNComplete" src="Images/CFNComplete.png" /></li>
</ul>
</li>
<li>
<p>Click the value and it will bring up the website:<br />
<img alt="DemoWebsite" src="Images/DemoWebsite.png" /></p>
</li>
</ol>
<p>(image will vary depending on what you supplied for <code>websiteimage</code>)</p>
<h2 id="2-configure-execution-environment">2. Configure Execution Environment <a name="configure_env"></a></h2>
<p>Failure injection is a means of testing resiliency by which a specific failure type is simulated on a service and its response is assessed.</p>
<p>You have a choice of environments from which to execute the failure injections for this lab. Bash scripts are a good choice and can be used from a Linux command line. If you prefer Python, Java, Powershell, or C#, then instructions for these are also provided.</p>
<h3 id="21-setup-aws-credentials-and-configuration">2.1 Setup AWS credentials and configuration</h3>
<p>Your execution environment needs to be configured to enable access to the AWS account you are using for the workshop. This includes</p>
<ul>
<li>
<p>Credentials - You identified these credentials <a href="#awslogin">back in step 1</a></p>
<ul>
<li>AWS access key</li>
<li>AWS secret access key</li>
<li>AWS session token (used in some cases)</li>
</ul>
</li>
<li>
<p>Configuration</p>
<ul>
<li>Region: us-east-2</li>
<li>Default output: JSON</li>
</ul>
</li>
</ul>
<p>Note: <strong>us-east-2</strong> is the <strong>Ohio</strong> region</p>
<p>If you already know how to configure these, please do so now. If you need help or if you are planning to use <strong>PowerShell</strong> for this lab, then <a href="Documentation/AWS_Credentials.html">follow these instructions</a></p>
<h3 id="22-set-up-the-bash-environment">2.2 Set up the bash environment <a name="bash"></a></h3>
<p>Using bash is an effective way to execute the failure injection tests for this workshop. The bash scripts make use of the AWS CLI. If you will be using bash, then follow the directions in this section. If you cannot use bash, then <a href="#notbash">skip to the next section</a>.</p>
<ol>
<li>
<p>Prerequisites</p>
<ul>
<li>
<p><code>awscli</code> AWS CLI installed</p>
<pre><code>$ aws --version
aws-cli/1.16.249 Python/3.6.8...
</code></pre>
<ul>
<li>Version 1.1 or higher is fine</li>
<li>If you instead got <code>command not found</code> then <a href="Documentation/Software_Install.html#awscli">see instructions here to install <code>awscli</code></a></li>
</ul>
</li>
<li>
<p><code>jq</code> command-line JSON processor installed.</p>
<pre><code>$ jq --version
jq-1.5-1-a5b5cbe
</code></pre>
<ul>
<li>Version 1.4 or higher is fine</li>
<li>If you instead got <code>command not found</code> then <a href="Documentation/Software_Install.html#jq">see instructions here to install <code>jq</code></a></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Download the <a href="https://github.com/awslabs/aws-well-architected-labs/tree/master/Reliability/300_Testing_for_Resiliency_of_EC2_RDS_and_S3/Code/FailureSimulations/bash">resiliency bash scripts from GitHub</a> to a location convenient for you to execute them. You can use the following links to download the scripts:</p>
<ul>
<li><a href="https://raw.githubusercontent.com/awslabs/aws-well-architected-labs/master/Reliability/300_Testing_for_Resiliency_of_EC2_RDS_and_S3/Code/FailureSimulations/bash/fail_instance.sh">bash/fail_instance.sh</a></li>
<li><a href="https://raw.githubusercontent.com/awslabs/aws-well-architected-labs/master/Reliability/300_Testing_for_Resiliency_of_EC2_RDS_and_S3/Code/FailureSimulations/bash/failover_rds.sh">bash/failover_rds.sh</a></li>
<li><a href="https://raw.githubusercontent.com/awslabs/aws-well-architected-labs/master/Reliability/300_Testing_for_Resiliency_of_EC2_RDS_and_S3/Code/FailureSimulations/bash/fail_az.sh">bash/fail_az.sh</a></li>
</ul>
</li>
<li>
<p>Set the scripts to be executable.  </p>
<pre><code>chmod u+x fail_instance.sh
chmod u+x failover_rds.sh
chmod u+x fail_az.sh
</code></pre>
</li>
</ol>
<h3 id="23-set-up-the-programming-language-environment-for-python-java-c-or-powershell">2.3 Set up the programming language environment (for Python, Java, C#, or PowerShell) <a name="notbash"></a></h3>
<p>If you will be using bash and executed the steps in the <em>previous</em> section, then you can <a href="#failure_injection">skip this and go to the section: <strong>Test Resiliency Using Failure Injection</strong></a></p>
<ul>
<li>If you will be using Python, Java, C#, or PowerShell for this workshop, <a href="Documentation/Programming_Environment.html">click here for instructions on setting up your environment</a></li>
</ul>
<h2 id="3-test-resiliency-using-failure-injection">3. Test Resiliency Using Failure Injection <a name="failure_injection"></a></h2>
<p><strong>Failure injection</strong> (also known as <strong>chaos testing</strong>) is an effective and essential method to validate and understand the resiliency of your workload and is a recommended practice of the <a href="https://aws.amazon.com/architecture/well-architected/">AWS Well-Architected Reliability Pillar</a>. Here you will initiate various failure scenarios and assess how your system reacts.</p>
<h3 id="preparation">Preparation</h3>
<p>Before testing, please prepare the following:</p>
<ol>
<li>
<p>Region must be <strong>Ohio</strong></p>
<ul>
<li>We will be using the AWS Console to assess the impact of our testing</li>
<li>
<p>Throughout this lab, make sure you are in the <strong>Ohio</strong> region</p>
<p><img alt="SelectOhio" src="Images/SelectOhio.png" /></p>
</li>
</ul>
</li>
<li>
<p>Get VPC ID</p>
<ul>
<li>A VPC (Amazon Virtual Private Cloud) is a logically isolated section of the AWS Cloud where you have deployed the resources for your service</li>
<li>For these tests you will need to know the <strong>VPC ID</strong> of the VPC you created as part of deploying the service</li>
<li>Navigate to the VPC management console: <a href="https://console.aws.amazon.com/vpc">https://console.aws.amazon.com/vpc</a></li>
<li>In the left pane, click <strong>Your VPCs</strong></li>
<li>1 - Tick the checkbox next to <strong>ResiliencyVPC</strong></li>
<li>2 - Copy the <strong>VPC ID</strong></li>
</ul>
<p><img alt="GetVpcId" src="Images/GetVpcId.png" /></p>
<ul>
<li>Save the VPC ID - you will use later whenever <code>&lt;vpc-id&gt;</code> is indicated in a command</li>
</ul>
</li>
<li>
<p>Get familiar with the service website</p>
<ol>
<li>Point a web browser at the URL you saved from earlier. (If you do not recall this, then <a href="#website">see these instructions</a>)</li>
<li>Note the <strong>availability_zone</strong> and <strong>instance_id</strong></li>
<li>Refresh the website several times watching these values</li>
<li>Note the values change. You have deployed one web server per each of three Availability Zones.<ul>
<li>The AWS Elastic Load Balancer (ELB) sends your request to any of these three healthy instances.</li>
<li>Refer to the diagram at the start of this Lab Guide to review your deployed system architecture.</li>
</ul>
</li>
</ol>
<table>
<thead>
<tr>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><strong>Availability Zones</strong> (<strong>AZ</strong>s) are isolated sets of resources within a region, each with redundant power, networking, and connectivity, housed in separate facilities. Each Availability Zone is isolated, but the Availability Zones in a Region are connected through low-latency links. AWS provides you with the flexibility to place instances and store data across multiple Availability Zones within each AWS Region for high resiliency.</td>
</tr>
<tr>
<td align="center"><em><strong>Learn more</strong>: After the lab <a href="https://docs.aws.amazon.com/whitepapers/latest/aws-overview/global-infrastructure.html">see this whitepaper</a> on regions and availability zones</em></td>
</tr>
</tbody>
</table>
</li>
</ol>
<h3 id="31-ec2-failure-injection">3.1 EC2 failure injection</h3>
<p>This failure injection will simulate a critical problem with one of the three web servers used by your service.</p>
<ol>
<li>
<p>Before starting, view the deployment machine in the <a href="https://console.aws.amazon.com/states">AWS Step Functions console</a> to verify the deployment has reached the stage where you can start testing:</p>
<ul>
<li><strong>single region</strong>: <code>WaitForWebApp</code> shows completed (green)</li>
<li><strong>multi region</strong>: <code>WaitForWebApp1</code> shows completed (green)</li>
</ul>
</li>
<li>
<p>Navigate to the EC2 console at <a href="http://console.aws.amazon.com/ec2">http://console.aws.amazon.com/ec2</a> and click <strong>Instances</strong> in the left pane.</p>
</li>
<li>
<p>There are three EC2 instances with a name beginning with <strong>WebServerforResiliency</strong>. For these EC2 instances note:</p>
<ol>
<li>Each has a unique <em>Instance ID</em></li>
<li>There is one instance per each Availability Zone</li>
<li>All instances are healthy</li>
</ol>
<p><img alt="EC2InitialCheck" src="Images/EC2InitialCheck.png" /></p>
</li>
<li>
<p>Open up two more console in separate tabs/windows. From the left pane, open <strong>Target Groups</strong> and <strong>Auto Scaling Groups</strong> in separate tabs. You now have three console views open</p>
<p><img alt="NavToTargetGroupAndScalingGroup" src="Images/NavToTargetGroupAndScalingGroup.png" /></p>
</li>
<li>
<p>To fail one of the EC2 instances, use the VPC ID as the command line argument replacing <code>&lt;vpc-id&gt;</code> in <em>one</em> (and only one) of the scripts/programs below. (choose the language that you setup your environment for)</p>
<table>
<thead>
<tr>
<th align="left">Language</th>
<th align="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Bash</td>
<td align="left"><code>./fail_instance.sh &lt;vpc-id&gt;</code></td>
</tr>
<tr>
<td align="left">Python</td>
<td align="left"><code>python fail_instance.py &lt;vpc-id&gt;</code></td>
</tr>
<tr>
<td align="left">Java</td>
<td align="left"><code>java -jar app-resiliency-1.0.jar EC2 &lt;vpc-id&gt;</code></td>
</tr>
<tr>
<td align="left">C#</td>
<td align="left"><code>.\AppResiliency EC2 &lt;vpc-id&gt;</code></td>
</tr>
<tr>
<td align="left">PowerShell</td>
<td align="left"><code>.\fail_instance.ps1 &lt;vpc-id&gt;</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>The specific output will vary based on the command used, but will include a reference to the ID of the EC2 instance and an indicator of success.  Here is the output for the Bash command. Note the <code>CurrentState</code> is <code>shutting-down</code></p>
<pre><code>$ ./fail_instance.sh vpc-04f8541d10ed81c80
Terminating i-0710435abc631eab3
{
    "TerminatingInstances": [
        {
            "CurrentState": {
                "Code": 32,
                "Name": "shutting-down"
            },
            "InstanceId": "i-0710435abc631eab3",
            "PreviousState": {
                "Code": 16,
                "Name": "running"
            }
        }
    ]
}
</code></pre>
</li>
<li>
<p>Go to the <em>EC2 Instances</em> console which you already have open (or <a href="http://console.aws.amazon.com/ec2/v2/home?region=us-east-2#Instances:">click here to open a new one</a>)</p>
<ul>
<li>
<p>Refresh it. (<em>Note</em>: it is usually more efficient to use the refresh button in the console, than to refresh the browser)</p>
<p><img alt="RefreshButton" src="Images/RefreshButton.png" /></p>
</li>
<li>
<p>Observe the status of the instance reported by the script. In the screen cap below it is <em>shutting down</em> as reported by the script and will ultimately transition to <em>terminated</em>.</p>
<p><img alt="EC2ShuttingDown" src="Images/EC2ShuttingDown.png" /></p>
</li>
</ul>
</li>
</ol>
<h3 id="32-system-response-to-ec2-instance-failure">3.2 System response to EC2 instance failure</h3>
<p>Watch how the service responds. Note how AWS systems help maintain service availability. Test if there is any non-availability, and if so then how long.</p>
<h4 id="321-system-availability">3.2.1 System availability</h4>
<p>Refresh the service website several times. Note the following:</p>
<ul>
<li>Website remains available</li>
<li>The remaining two EC2 instances are handling all the requests (as per the displayed <code>instance_id</code>)</li>
</ul>
<h4 id="322-load-balancing">3.2.2 Load balancing</h4>
<p>Load balancing ensures service requests are not routed to unhealthy resources, such as the failed EC2 instance.</p>
<ol>
<li>
<p>Go to the <strong>Target Groups</strong> console you already have open (or <a href="http://console.aws.amazon.com/ec2/v2/home?region=us-east-2#TargetGroups:">click here to open a new one</a>)</p>
<ul>
<li>If there is more than one target group, select the one with the <strong>Load Balancer</strong> named <strong>ResiliencyTestLoadBalancer</strong></li>
</ul>
</li>
<li>
<p>Click on the <strong>Targets</strong> tab and observe:</p>
<ul>
<li>Status of the instances in the group. The load balancer will only send traffic to healthy instances.</li>
<li>When the auto scaling launches a new instance, it is automatically added to the load balancer target group.</li>
<li>In the screen cap below the <em>unhealthy</em> instance is the newly added one.  The load balancer will not send traffic to it until it is completed initializing. It will ultimately transition to <em>healthy</em> and then start receiving traffic.</li>
<li>
<p>Note the new instance was started in the same Availability Zone as the failed one. Amazon EC2 Auto Scaling automatically maintains balance across all of the Availability Zones that you specify.</p>
<p><img alt="TargetGroups" src="Images/TargetGroups.png" />  </p>
</li>
</ul>
</li>
<li>
<p>From the same console, now click on the <strong>Monitoring</strong> tab and view metrics such as <strong>Unhealthy hosts</strong> and <strong>Healthy hosts</strong></p>
<p><img alt="TargetGroupsMonitoring" src="Images/TargetGroupsMonitoring.png" /></p>
</li>
</ol>
<h4 id="323-auto-scaling">3.2.3 Auto scaling</h4>
<p>Autos scaling ensures we have the capacity necessary to meet customer demand. The auto scaling for this service is a simple configuration that ensures at least three EC2 instances are running. More complex configurations in response to CPU or network load are also possible using AWS.</p>
<ol>
<li>
<p>Go to the <strong>Auto Scaling Groups</strong> console you already have open (or <a href="http://console.aws.amazon.com/ec2/autoscaling/home?region=us-east-2#AutoScalingGroups:">click here to open a new one</a>)</p>
<ul>
<li>If there is more than one auto scaling group, select the one with the name that starts with <strong>WebServersforResiliencyTesting</strong></li>
</ul>
</li>
<li>
<p>Click on the <strong>Activity History</strong> tab and observe:</p>
<ul>
<li>The screen cap below shows that all three instances were successfully started at 17:25</li>
<li>
<p>At 19:29 the instance targeted by the script was put in <em>draining</em> state and a new instance ending in <em>...62640</em> was started, but was still initializing. The new instance will ultimately transition to <em>Successful</em> status</p>
<p><img alt="AutoScalingGroup" src="Images/AutoScalingGroup.png" />  </p>
</li>
</ul>
</li>
</ol>
<p><em>Draining</em> allows existing, in-flight requests made to an instance to complete, but it will not send any new requests to the instance. <em><strong>Learn more</strong>: After the lab <a href="https://aws.amazon.com/blogs/aws/elb-connection-draining-remove-instances-from-service-with-care/">see this blog post</a> for more information on <em>draining</em>.</em></p>
<p><em><strong>Learn more</strong>: After the lab see <a href="https://docs.aws.amazon.com/autoscaling/ec2/userguide/AutoScalingGroup.html">Auto Scaling Groups</a> to learn more how auto scaling groups are setup and how they distribute instances, and <a href="https://docs.aws.amazon.com/autoscaling/ec2/userguide/as-scale-based-on-demand.html">Dynamic Scaling for Amazon EC2 Auto Scaling</a> for more details on setting up auto scaling that responds to demand</em></p>
<h4 id="324-ec2-failure-injection-conclusion">3.2.4 EC2 failure injection - conclusion</h4>
<p>Deploying multiple servers and Elastic Load Balancing enables a service suffer the loss of a server with no availability disruptions as user traffic is automatically routed to the healthy servers. Amazon Auto Scaling ensures unhealthy hosts are removed and replaced with healthy ones to maintain high availability.</p>
<h3 id="33-rds-failure-injection">3.3 RDS failure injection</h3>
<p>This failure injection will simulate a critical failure of the Amazon RDS DB instance.</p>
<ol>
<li>
<p>Before starting, view the deployment machine in the <a href="https://console.aws.amazon.com/states">AWS Step Functions console</a> to verify the deployment has reached the stage where you can start testing:</p>
<ul>
<li><strong>single region</strong>: <code>WaitForMultiAZDB</code> shows completed (green)</li>
<li><strong>multi region</strong>: both <code>WaitForRDSRRStack1</code> and <code>CheckRDSRRStatus1</code> show completed (green)</li>
</ul>
</li>
<li>
<p>Before you initiate the failure simulation, refresh the service website several times. Every time the image is loaded, the website writes a record to the Amazon RDS database</p>
</li>
<li>
<p>Click on <strong>click here to go to other page</strong> and it will show the latest ten entries in the Amazon RDS DB</p>
<ol>
<li>The DB table shows "hits" on our <em>image page</em></li>
<li>Website URL access requests are shown here for traffic against the <em>image page</em>. These include IPs of browser traffic as well as IPs of load balancer health checks</li>
<li>For each region the AWS Elastic Load Balancer makes these health checks, so you will see three IP addresses from these</li>
<li>Click on <strong>click here to go to other page</strong> again to return to the <em>image page</em></li>
</ol>
</li>
<li>
<p>Go to the RDS Dashboard in the AWS Console at <a href="http://console.aws.amazon.com/rds">http://console.aws.amazon.com/rds</a></p>
</li>
<li>
<p>From the RDS dashboard</p>
<ul>
<li>Click on "DB Instances (<em>n</em>/40)"</li>
<li>Click on the DB identifier for your database (if you have more than one database, refer to the <strong>VPC ID</strong> to find the one for this workshop)</li>
<li>If running the <strong>multi-region</strong> deployment, select the DB instance with Role=<strong>Master</strong></li>
<li>Select the <strong>Configuration</strong> tab</li>
</ul>
</li>
<li>
<p>Look at the configured values. Note the following:</p>
<ul>
<li>Value of the <strong>Info</strong> field is <strong>Available</strong></li>
<li>RDS DB is configured to be <strong>Multi-AZ</strong>.  The <em>primary</em> DB instance is in AZ <strong>us-east-2a</strong> and the <em>standby</em> DB instance is in AZ <strong>us-east-2b</strong>
    <img alt="DBInitialConfiguration" src="Images/DBInitialConfiguration.png" /></li>
</ul>
</li>
<li>
<p>To failover of the RDS instance, use the VPC ID as the command line argument replacing <code>&lt;vpc-id&gt;</code> in <em>one</em> (and only one) of the scripts/programs below. (choose the language that you setup your environment for)</p>
<table>
<thead>
<tr>
<th align="left">Language</th>
<th align="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Bash</td>
<td align="left"><code>./failover_rds.sh &lt;vpc-id&gt;</code></td>
</tr>
<tr>
<td align="left">Python</td>
<td align="left"><code>python fail_rds.py &lt;vpc-id&gt;</code></td>
</tr>
<tr>
<td align="left">Java</td>
<td align="left"><code>java -jar app-resiliency-1.0.jar RDS &lt;vpc-id&gt;</code></td>
</tr>
<tr>
<td align="left">C#</td>
<td align="left"><code>.\AppResiliency RDS &lt;vpc-id&gt;</code></td>
</tr>
<tr>
<td align="left">PowerShell</td>
<td align="left"><code>.\failover_rds.ps1 &lt;vpc-id&gt;</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>The specific output will vary based on the command used, but will include some indication that the your Amazon RDS Database is being failedover: <code>Failing over mdk29lg78789zt</code></p>
</li>
</ol>
<h3 id="34-system-response-to-rds-instance-failure">3.4 System response to RDS instance failure</h3>
<p>Watch how the service responds. Note how AWS systems help maintain service availability. Test if there is any non-availability, and if so then how long.</p>
<h4 id="341-system-availability">3.4.1 System availability</h4>
<ol>
<li>
<p>The website is <em>not</em> available. Some errors you might see reported:</p>
<ul>
<li><strong>No Response / Timeout</strong>: Request was successfully sent to EC2 server, but server no longer has connection to an active database</li>
<li><strong>504 Gateway Time-out</strong>: Amazon Elastic Load Balancer did not get a response from the server.  This can happen when it has removed the servers that are unable to respond and added new ones, but the new ones have not yet finished initialization, and there are no healthy hosts to receive the request</li>
<li><strong>502 Bad Gateway</strong>: The Amazon Elastic Load Balancer got a bad request from the server</li>
<li>An error you will <em>not</em> see is <strong>This site cant be reached</strong>. This is because the Elastic Load Balancer has a node in each of the three Availability Zones and is always available to serve requests.</li>
</ul>
</li>
<li>
<p>Continue on to the next steps, periodically returning to attempt to refresh the website.</p>
</li>
</ol>
<h4 id="342-failover-to-standby">3.4.2 Failover to standby</h4>
<ol>
<li>
<p>On the database console <strong>Configuration</strong> tab</p>
<ol>
<li>Refresh and note the values of the <strong>Info</strong> field. It will ultimately return to <strong>Available</strong> when the failover is complete.</li>
<li>
<p>Note the AZs for the <em>primary</em> and <em>standby</em> instances. They have swapped as the <em>standby</em> has no taken over <em>primary</em> responsibility, and the former <em>primary</em> has been restarted. (After RDS failover it can take several minutes for the console to update as shown below. The failover has however completed)</p>
<p><img alt="DBPostFailConfiguration" src="Images/DBPostFailConfiguration.png" /></p>
</li>
<li>
<p>From the AWS RDS console, click on the <strong>Logs &amp; events</strong> tab and scroll down to <strong>Recent events</strong>. You should see entries like those below. In this case failover took less than a minute.</p>
<pre><code>  Mon, 14 Oct 2019 19:53:37 GMT - Multi-AZ instance failover started.
  Mon, 14 Oct 2019 19:53:45 GMT - DB instance restarted
  Mon, 14 Oct 2019 19:54:21 GMT - Multi-AZ instance failover completed
</code></pre>
</li>
</ol>
</li>
</ol>
<h4 id="342-ec2-server-replacement">3.4.2 EC2 server replacement</h4>
<ol>
<li>
<p>From the AWS RDS console, click on the <strong>Monitoring</strong> tab and look at <strong>DB connections</strong></p>
<ul>
<li>As the failover happens the existing three servers all cannot connect to the DB</li>
<li>AWS Auto Scaling detects this (any server not returning an http 200 status is deemed unhealthy), and replaces the three EC2 instances with new ones that establish new connections to the new RDS <em>primary</em> instance</li>
<li>
<p>The graph shows an unavailability period of about four minutes until at least one DB connection is re-established</p>
<p><img alt="RDSDbConnections" src="Images/RDSDbConnections.png" /></p>
</li>
</ul>
</li>
<li>
<p>[optional] Go to the <a href="http://console.aws.amazon.com/ec2/autoscaling/home?region=us-east-2#AutoScalingGroups:">Auto scaling group</a> and AWS Elastic Load Balancer <a href="http://console.aws.amazon.com/ec2/v2/home?region=us-east-2#TargetGroups:">Target group</a> consoles to see how EC2 instance and traffic routing was handled</p>
</li>
</ol>
<h4 id="343-rds-failure-injection-conclusion">3.4.3 RDS failure injection - conclusion</h4>
<ul>
<li>AWS RDS Database failover took less than a minute</li>
<li>Time for AWS Auto Scaling to detect that the instances were unhealthy and to start up new ones took four minutes. This resulted in a four minute non-availability event.</li>
</ul>
<p><em><strong>Learn more</strong>: After the lab see <a href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.MultiAZ.html">High Availability (Multi-AZ) for Amazon RDS</a> for more details on high availability and failover support for DB instances using Multi-AZ deployments.</em></p>
<table>
<thead>
<tr>
<th align="center">High Availability (Multi-AZ) for Amazon RDS</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">The primary DB instance switches over automatically to the standby replica if any of the following conditions occur:</td>
</tr>
<tr>
<td align="center">An Availability Zone outage</td>
</tr>
<tr>
<td align="center">The primary DB instance fails</td>
</tr>
<tr>
<td align="center">The DB instance's server type is changed</td>
</tr>
<tr>
<td align="center">The operating system of the DB instance is undergoing software patching</td>
</tr>
<tr>
<td align="center">A manual failover of the DB instance was initiated using Reboot with failover</td>
</tr>
</tbody>
</table>
<h3 id="36-az-failure-injection">3.6 AZ failure injection</h3>
<p>This failure injection will simulate a critical problem with one of the three AWS Availability Zones (AZs) used by your service. AWS Availability Zones are  powerful tools for helping build highly available applications. If an application is partitioned across AZs, companies are better isolated and protected from issues such as lightning strikes, tornadoes, earthquakes and more.</p>
<ol>
<li>
<p>Go to the RDS Dashboard in the AWS Console at <a href="http://console.aws.amazon.com/rds">http://console.aws.amazon.com/rds</a> and note which Availability Zone the AWS RDS <em>primary</em> DB instance is in.</p>
<ul>
<li><strong>Note</strong>: If you previously ran the <strong>RDS Failure Injection test</strong>, you must wait until the console shows the AZs for the <em>primary</em> and <em>standby</em> instances as swapped, before running this test</li>
<li>A good way to run the AZ failure injection is first in an AZ <em>other</em> than this - we'll call this <strong>Scenario 1</strong></li>
<li>Then try it again in the <em>same</em> AZ as the AWS RDS <em>primary</em> DB instance - we'll call this <strong>Scenario 2</strong></li>
<li>Taking down two out of the three AZs this way is an unlikely use case, however it will show how AWS systems work to maintain service integrity despite extreme circumstances.</li>
<li>And executing this way illustrates the impact and response under the two different scenarios.</li>
</ul>
</li>
<li>
<p>To simulate failure of an AZ, select one of the Availability Zones used by your service (<code>us-east-2a</code>, <code>us-east-2b</code>, or <code>us-east-2c</code>) as <code>&lt;az&gt;</code></p>
<ul>
<li>For <strong>scenario 1</strong> select an AZ that is neither <em>primary</em> nor <em>secondary</em> for your RDS DB instance. Given the following RDS console you would choose <code>us-east-2c</code></li>
<li>For <strong>scenario 2</strong> select the AZ that is <em>primary</em> for your RDS DB instance. Given the following RDS console you would choose <code>us-east-2b</code></li>
</ul>
<p><img alt="DBConfigurationShort" src="Images/DBConfigurationShort.png" /></p>
</li>
<li>
<p>use your VPC ID as <code>&lt;vpc-id&gt;</code></p>
</li>
<li>
<p>Select <em>one</em> (and only one) of the scripts/programs below. (choose the language that you setup your environment for).</p>
<table>
<thead>
<tr>
<th align="left">Language</th>
<th align="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Bash</td>
<td align="left"><code>./fail_az.sh &lt;az&gt; &lt;vpc-id&gt;</code></td>
</tr>
<tr>
<td align="left">Python</td>
<td align="left"><code>python fail_az.py &lt;vpc-id&gt; &lt;az&gt;</code></td>
</tr>
<tr>
<td align="left">Java</td>
<td align="left"><code>java -jar app-resiliency-1.0.jar AZ &lt;vpc-id&gt; &lt;az&gt;</code></td>
</tr>
<tr>
<td align="left">C#</td>
<td align="left"><code>.\AppResiliency AZ &lt;vpc-id&gt; &lt;az&gt;</code></td>
</tr>
<tr>
<td align="left">PowerShell</td>
<td align="left"><code>.\fail_az.ps1 &lt;az&gt; &lt;vpc-id&gt;</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>The specific output will vary based on the command used.</p>
<ul>
<li>Note whether an RDS failover was initiated.  This would be the case if you selected the AZ containing the AWS RDS <em>primary</em> DB instance</li>
</ul>
</li>
</ol>
<h3 id="37-system-response-to-az-failure">3.7 System response to AZ failure</h3>
<p>Watch how the service responds. Note how AWS systems help maintain service availability. Test if there is any non-availability, and if so then how long.</p>
<h4 id="371-system-availability">3.7.1 System availability</h4>
<p>Refresh the service website several times</p>
<ul>
<li><strong>Scenario 1</strong>: If you selected an AZ <em>not</em> containing the AWS RDS <em>primary</em> DB instance then you should see uninterrupted availability</li>
<li><strong>Scenario 2</strong>: If you selected the AZ containing the AWS RDS <em>primary</em> DB instance, then an availability loss similar to what you saw with RDS fault injection testing will occur.</li>
</ul>
<h4 id="372-scenario-1-load-balancer-and-web-server-tiers">3.7.2 Scenario 1 - Load balancer and web server tiers</h4>
<p>This scenario is similar to the EC2 failure injection test because there is only one EC2 server per AZ in our architecture. Look at the same screens you as for that test:</p>
<ul>
<li><a href="http://console.aws.amazon.com/ec2/v2/home?region=us-east-2#Instances:">EC2 Instances</a></li>
<li>Load Balancer <a href="http://console.aws.amazon.com/ec2/v2/home?region=us-east-2#TargetGroups:">Target group</a></li>
<li><a href="http://console.aws.amazon.com/ec2/autoscaling/home?region=us-east-2#AutoScalingGroups:">Auto Scaling Groups</a></li>
</ul>
<p>One difference from the EC2 failure test that you will observe is that auto scaling will bring up the replacement EC2 instance in an AZ that already has an EC2 instance as it attempts to balance the requested three EC2 instances across the remaining AZs.</p>
<h4 id="373-scenario-2-load-balancer-web-server-and-data-tiers">3.7.3 Scenario 2 - Load balancer, web server, and data tiers</h4>
<p>This scenario is similar to a combination of the RDS failure injection along with EC2 failure injection. In addition to the EC2 related screens look at the <a href="http://console.aws.amazon.com/rds">Amazon RDS console</a>, navigate to your DB screen and observe the following tabs:</p>
<ul>
<li>Configuration</li>
<li>Monitoring</li>
<li>Logs &amp; Events</li>
</ul>
<h4 id="374-az-failure-injection-conclusion">3.7.4 AZ failure injection - conclusion</h4>
<p>This similarity between <strong>scenario 1</strong> and the EC2 failure test, and between <strong>scenario 2</strong> and the RDS failure test is illustrative of how an AZ failure impacts your system. The resources in that AZ will have no or limited availability. With the strong partitioning and isolation between Availability Zones however, resources in the other AZs continue to provide your service with needed functionality. <strong>Scenario 1</strong> results in loss of the load balancer and web server capabilities in one AZ, while <strong>Scenario 2</strong> adds to that the additional loss of the data tier. By ensuring that every tier of your system is in multiple AZs, you create a partitioned architecture resilient to failure.</p>
<h4 id="374-az-failure-recovery">3.7.4 AZ failure recovery</h4>
<p>This step is optional. To simulate the AZ returning to health do the following:</p>
<ol>
<li>Go to the <a href="http://console.aws.amazon.com/ec2/autoscaling/home?region=us-east-2#AutoScalingGroups:">Auto Scaling Group console</a></li>
<li>Select the <strong>WebServersforResiliencyTesting</strong> auto scaling group</li>
<li>Actions &gt;&gt; Edit</li>
<li>In the <strong>Subnet</strong> field add any <strong>ResiliencyVPC-PrivateSubnet</strong>s that are missing (there should be three total) and <strong>Save</strong></li>
<li>Go to the <a href="https://us-east-2.console.aws.amazon.com/vpc/home?region=us-east-2#acls:">Network ACL console</a></li>
<li>Look at the NACL entries for the VPC called <strong>ResiliencyVPC</strong></li>
<li>
<p>For any of these NACLs that are <em>not</em> <em>Default</em> do the following</p>
<ol>
<li>Select the NACL</li>
<li><strong>Actions</strong> &gt;&gt; <strong>Edit subnet associations</strong></li>
<li>Uncheck all boxes and click <strong>Edit</strong></li>
<li><strong>Actions</strong> &gt;&gt; <strong>Delete network ACL</strong></li>
</ol>
</li>
<li>
<p>Note how the auto scaling redistributes the EC2 serves across the availability zones</p>
</li>
</ol>
<h3 id="38-s3-failure-injection">3.8 S3 failure injection</h3>
<ol>
<li>Failure of S3 means that the image will not be available</li>
<li>You may ONLY do this testing if you supplied your own <code>websiteimage</code> reference to an S3 bucket you control</li>
</ol>
<h4 id="381-bucket-name">3.8.1 Bucket name</h4>
<p>You will need to know the bucket name where your image is. For example if the <code>websiteimage</code> value you supplied was <code>"https://s3.us-east-2.amazonaws.com/my-awesome-bucketname/my_image.jpg"</code>, then the bucket name is <code>my-awesome-bucketname</code></p>
<p>For this failure simulation it is most straightforward to use the AWS Console as follows.  (If you are interested in doing this <a href="Documentation/S3_with_AWS_CLI.html">using the AWS CLI then see here</a> - choose <em>either</em> AWS Console or AWS CLI)</p>
<h5 id="aws-console">AWS Console</h5>
<ol>
<li>Navigate to the S3 console: <a href="https://console.aws.amazon.com/s3">https://console.aws.amazon.com/s3</a></li>
<li>Select the bucket name where the image is located</li>
<li>Select the object, then select the "Permissions" tab</li>
<li>Select the "Public Access" radio button, and deselect the "Read object" checkbox and Save</li>
<li>To re-enable access (after testing), do the same steps, tick the "Read object" checkbox and Save</li>
</ol>
<h4 id="383-system-response-to-s3-failure">3.8.3 System response to S3 failure <a name="s3response"></a></h4>
<p>What is the expected effect? How long does it take to take effect?</p>
<ul>
<li>Note that due to browser caching you may still see the image on refreshing the site. On most systems Shift-F5 does a clean refresh with no cache</li>
</ul>
<p>How would you diagnose if this is a larger problem than permissions?</p>
<h3 id="39-more-testing-you-can-do">3.9 More testing you can do</h3>
<p>You can use drift detection in the CloudFormation console to see what had changed, or work on code to heal the failure modes.</p>
<hr />
<h2 id="4-tear-down-this-lab">4. Tear down this lab <a name="tear_down"></a></h2>
<p><strong>If you are attending an in-person workshop and were provided with an AWS account by the instructor</strong>:</p>
<ul>
<li>There is no need to tear down the lab. Feel free to continue exploring. Log out of your AWS account when done.</li>
</ul>
<p><strong>If you are using your own AWS account</strong>:</p>
<ul>
<li>You may leave these resources deployed for as long as you want. When you are ready to delete these resources, see the following instructions</li>
</ul>
<h3 id="remove-manually-provisioned-resources">Remove manually provisioned resources</h3>
<p>Some resources were created by the failure simulation scripts. You need to remove these first</p>
<ol>
<li>Go to the <a href="https://us-east-2.console.aws.amazon.com/vpc/home?region=us-east-2#acls:">Network ACL console</a></li>
<li>Look at the NACL entries for the VPC called <strong>ResiliencyVPC</strong></li>
<li>For any of these NACLs that are <em>not</em> <em>Default</em> do the following<ol>
<li>Select the NACL</li>
<li><strong>Actions</strong> &gt;&gt; <strong>Edit subnet associations</strong></li>
<li>Uncheck all boxes and click <strong>Edit</strong></li>
<li><strong>Actions</strong> &gt;&gt; <strong>Delete network ACL</strong></li>
</ol>
</li>
</ol>
<h3 id="remove-aws-cloudformation-provisioned-resources">Remove AWS CloudFormation provisioned resources</h3>
<p>As part of lab setup you have deployed several AWS CloudFormation stacks. These directions will show you:</p>
<ul>
<li>How to delete an AWS CloudFormation stack</li>
<li>In what specific order the stacks must be deleted</li>
</ul>
<h4 id="how-to-delete-an-aws-cloudformation-stack">How to delete an AWS CloudFormation stack</h4>
<ol>
<li>Go to the AWS CloudFormation console: <a href="https://console.aws.amazon.com/cloudformation">https://console.aws.amazon.com/cloudformation</a></li>
<li>
<p>Select the CloudFormation stack to delete and click <strong>Delete</strong></p>
<p><img alt="DeletingWebServers" src="Images/DeletingWebServers.png" /></p>
</li>
<li>
<p>In the confirmation dialog, click <strong>Delete stack</strong></p>
</li>
<li>The <em>Status</em> changes to <strong>DELETE_IN_PROGRESS</strong></li>
<li>Click the refresh button to update and status will ultimately progress to <strong>DELETE_COMPLETE</strong></li>
<li>
<p>When complete, the stack will no longer be displayed. To see deleted stacks use the drop down next to the Filter text box.</p>
<p><img alt="ShowDeletedStacks" src="Images/ShowDeletedStacks.png" /></p>
</li>
<li>
<p>To see progress during stack deletion</p>
<ul>
<li>Click the stack name</li>
<li>Select the Events column</li>
<li>Refresh to see new events</li>
</ul>
</li>
</ol>
<h3 id="delete-workshop-cloudformation-stacks">Delete workshop CloudFormation stacks</h3>
<ul>
<li>Since AWS resources deployed by AWS CloudFormation stacks may have dependencies on the stacks that were created before, then deletion must occur in the opposite order they were created</li>
<li>Stacks with the same ordinal can be deleted at the same time. <em>All</em> stacks for a given ordinal must be <strong>DELETE_COMPLETE</strong> before moving on to the next ordinal</li>
</ul>
<h4 id="single-region">Single region</h4>
<p>If you deployed the <strong>single region</strong> option, then delete your stacks in the following order</p>
<table>
<thead>
<tr>
<th align="center">Order</th>
<th align="left">CloudFormation stack</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">1</td>
<td align="left">WebServersforResiliencyTesting</td>
</tr>
<tr>
<td align="center">1</td>
<td align="left">MySQLforResiliencyTesting</td>
</tr>
<tr>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center">2</td>
<td align="left">ResiliencyVPC</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left">DeployResiliencyWorkshop</td>
</tr>
</tbody>
</table>
<h4 id="multi-region">Multi region</h4>
<p>If you deployed the <strong>multi region</strong> option, then <a href="Documentation/Multi_Region_Stack_Deletion.html">see these instructions for the order in which to delete the CloudFormation stacks</a></p>
<h3 id="delete-remaining-resources">Delete remaining resources</h3>
<h4 id="delete-lambda-execution-role-used-to-create-custom-resource">Delete Lambda execution role used to create custom resource</h4>
<p>This role was purposely not deleted by the CloudFormation stack, because CloudFormation needs it to delete the custom resource it was used to create.  <em>Choose ONE</em>: AWS CLI <strong>or</strong> AWS Console.</p>
<ul>
<li>Do this step only after ALL CloudFormation stacks are <strong>DELETE_COMPLETE</strong></li>
</ul>
<p>Using AWS CLI:</p>
<pre><code>aws iam delete-role-policy --role-name LambdaCustomResourceRole-SecureSsmForRds --policy-name LambdaCustomResourcePolicy

aws iam delete-role --role-name LambdaCustomResourceRole-SecureSsmForRds
</code></pre>
<p>Using AWS Console:</p>
<ol>
<li>Go to the IAM Roles Console: <a href="https://console.aws.amazon.com/iam/home#/roles">https://console.aws.amazon.com/iam/home#/roles</a></li>
<li>Search for <code>SecureSsmForRds</code></li>
<li>Check the box next to <code>LambdaCustomResourceRole-SecureSsmForRds</code></li>
<li>Click <strong>Delete role</strong> button</li>
<li>Click <strong>Yes, delete</strong> button</li>
</ol>
<h4 id="delete-systems-manager-parameter">Delete Systems Manager parameter</h4>
<p>The password(s) for your Amazon RDS instances were stored in AWS Systems Manager secure parameter store. These steps will verify the parameter(s) were deleted, and if not then guide you to deleting them. <em>Choose ONE</em>: AWS CLI <strong>or</strong> AWS Console.</p>
<ul>
<li><strong>single region</strong> You only need to do the following steps in <strong>us-east-2</strong></li>
<li><strong>multi region</strong> Do the following steps for both <strong>us-east-2</strong> and <strong>us-west-</strong>2</li>
</ul>
<p>Using AWS CLI:</p>
<ul>
<li>In the following command use the <a href="#deployinfra">workshop name supplied in step 1.4.4.</a> when you ran the step function state machine. If you kept the defaults, the command will work as-is:<pre><code>aws ssm delete-parameter --name 300-ResiliencyofEC2RDSandS3
</code></pre>
</li>
</ul>
<p>If you get <code>ParameterNotFound</code> then the password was already deleted by the CloudFormation stack (as expected).</p>
<p>Using AWS Console:</p>
<ol>
<li>Select the region</li>
<li>Wait until <strong>ResiliencyVPC</strong> CloudFormation stack is <strong>DELETE_COMPLETE</strong> in the region</li>
<li>Go to the <a href="https://console.aws.amazon.com/systems-manager/parameters/">AWS Console for AWS Systems Manager parameter store</a></li>
<li>Look for the parameter created for your infrastructure. If you used our default values, this will be named <strong>300-ResiliencyofEC2RDSandS3</strong></li>
<li>If it is not present (check all regions you deployed to) then you are finished</li>
<li>If it is present then<ol>
<li>Click on the parameter name</li>
<li>Click the <strong>Delete</strong> button</li>
<li>Click <strong>Delete</strong> again</li>
</ol>
</li>
</ol>
<hr />
<h2 id="references-useful-resources">References &amp; useful resources</h2>
<ul>
<li>EC2 <a href="https://docs.aws.amazon.com/autoscaling/ec2/userguide/AutoScalingGroup.html">Auto Scaling Groups</a></li>
<li><a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/introduction.html">What Is an Application Load Balancer?</a></li>
<li><a href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.MultiAZ.html">High Availability (Multi-AZ) for Amazon RDS</a></li>
<li><a href="https://aws.amazon.com/blogs/database/amazon-rds-under-the-hood-multi-az/">Amazon RDS Under the Hood: Multi-AZ</a></li>
<li><a href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.RegionsAndAvailabilityZones.html">Regions and Availability Zones</a></li>
<li><a href="https://medium.com/@adhorn/injecting-chaos-to-amazon-ec2-using-amazon-system-manager-ca95ee7878f5">Injecting Chaos to Amazon EC2 using AWS System Manager</a></li>
<li><a href="https://read.acloud.guru/building-a-serverless-multi-region-active-active-backend-36f28bed4ecf">Build a serverless multi-region, active-active backend solution in an hour</a></li>
</ul>
<hr />
<h2 id="license">License</h2>
<h3 id="documentation-license">Documentation License</h3>
<p>Licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Share Alike 4.0</a> license.</p>
<h3 id="code-license">Code License</h3>
<p>Licensed under the Apache 2.0 and MITnoAttr License.</p>
<p>Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.</p>
<p>Licensed under the Apache License, Version 2.0 (the "License"). You may not use this file except in compliance with the License. A copy of the License is located at</p>
<p><a href="https://aws.amazon.com/apache2.0/">https://aws.amazon.com/apache2.0/</a></p>
<p>or in the <a href="../../LICENSE-Apache">"license" file</a> accompanying this file. This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="README.html" title="Lab Overview" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Lab Overview
              </span>
            </div>
          </a>
        
        
          <a href="TroubleShooting_Guide.html" title="Trouble Shooting Guide" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Trouble Shooting Guide
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy; 2019, Amazon Web Services, Inc. or its affiliates. All rights reserved.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.808e90bb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>